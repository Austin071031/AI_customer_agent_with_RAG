{
  "id": "snapshot_1762927802906_v1pn54nfv",
  "approvalId": "approval_1762927802894_meefjia56",
  "approvalTitle": "Project Structure Document for AI Customer Agent",
  "version": 1,
  "timestamp": "2025-11-12T06:10:02.906Z",
  "trigger": "initial",
  "status": "pending",
  "content": "# Project Structure\r\n\r\n## Directory Organization\r\n\r\n```\r\nai-customer-agent/\r\n├── src/                    # Main source code\r\n│   ├── api/               # FastAPI backend\r\n│   │   ├── endpoints/     # API route handlers\r\n│   │   ├── main.py        # API server entry point\r\n│   │   ├── dependencies.py # Dependency injection\r\n│   │   └── state.py       # Application state management\r\n│   ├── services/          # Core business logic\r\n│   │   ├── chat_manager.py\r\n│   │   ├── knowledge_base.py\r\n│   │   ├── deepseek_service.py\r\n│   │   └── config_manager.py\r\n│   ├── models/            # Data models and validation\r\n│   │   ├── chat_models.py\r\n│   │   └── config_models.py\r\n│   ├── ui/                # Streamlit frontend\r\n│   │   └── streamlit_app.py\r\n│   └── utils/             # Shared utilities\r\n│       ├── logger.py\r\n│       ├── cache.py\r\n│       ├── error_handler.py\r\n│       └── gpu_utils.py\r\n├── config/                # Configuration files\r\n│   ├── settings.yaml\r\n│   └── .env\r\n├── knowledge_base/        # Vector database storage\r\n│   └── chroma_db/\r\n├── logs/                  # Application logs\r\n├── examples/              # Usage examples\r\n├── docs/                  # Additional documentation\r\n├── tests/                 # Test suite\r\n├── main.py               # Main application entry point\r\n├── run_api.py            # API server entry point\r\n├── run_ui.py             # UI server entry point\r\n└── requirements.txt      # Python dependencies\r\n```\r\n\r\n## Naming Conventions\r\n\r\n### Files\r\n- **Components/Modules**: `snake_case` for Python files and directories\r\n- **Services/Handlers**: `snake_case` with descriptive names (e.g., `chat_manager.py`, `knowledge_base.py`)\r\n- **Utilities/Helpers**: `snake_case` with utility-focused names (e.g., `gpu_utils.py`, `error_handler.py`)\r\n- **Tests**: `test_` prefix with same directory structure as source (e.g., `test_chat_manager.py`)\r\n\r\n### Code\r\n- **Classes/Types**: `PascalCase` (e.g., `ChatManager`, `KnowledgeBaseService`)\r\n- **Functions/Methods**: `snake_case` (e.g., `process_document`, `send_chat_message`)\r\n- **Constants**: `UPPER_SNAKE_CASE` (e.g., `DEFAULT_MODEL`, `MAX_TOKENS`)\r\n- **Variables**: `snake_case` (e.g., `conversation_history`, `api_key`)\r\n\r\n## Import Patterns\r\n\r\n### Import Order\r\n1. Standard library imports\r\n2. Third-party library imports\r\n3. Local application imports\r\n4. Type imports (if using type annotations)\r\n\r\n### Module/Package Organization\r\n- **Absolute imports** from project root using `src` as package\r\n- **Relative imports** within the same module directory\r\n- **Clear separation** between internal and external dependencies\r\n\r\n## Code Structure Patterns\r\n\r\n### Module/Class Organization\r\n```\r\n1. Imports (standard lib, third-party, local)\r\n2. Constants and configuration\r\n3. Type definitions and data models\r\n4. Main class/function definitions\r\n5. Helper/utility functions\r\n6. Main execution block (if applicable)\r\n```\r\n\r\n### Function/Method Organization\r\n- **Input validation** at function start\r\n- **Core business logic** in the middle\r\n- **Error handling** with specific exceptions\r\n- **Clear return values** with consistent types\r\n\r\n### File Organization Principles\r\n- **One primary class per file** for services and managers\r\n- **Related functionality grouped** in same directory\r\n- **Public API clearly defined** at module level\r\n- **Implementation details** in private functions\r\n\r\n## Code Organization Principles\r\n\r\n1. **Single Responsibility**: Each service and module has one clear purpose\r\n2. **Modularity**: Services are independent and can be tested separately\r\n3. **Testability**: Dependency injection enables easy mocking and testing\r\n4. **Consistency**: Follow established patterns across the codebase\r\n\r\n## Module Boundaries\r\n\r\n- **API Layer**: Handles HTTP requests, validation, and response formatting\r\n- **Service Layer**: Contains business logic and coordinates between services\r\n- **Data Layer**: Manages data storage, retrieval, and persistence\r\n- **UI Layer**: Handles user interface and interaction\r\n- **Utility Layer**: Provides shared functionality across all layers\r\n\r\n### Dependency Flow\r\n```\r\nUI Layer → API Layer → Service Layer → Data Layer\r\n                    ↘ Utility Layer ↗\r\n```\r\n\r\n## Code Size Guidelines\r\n\r\n- **File size**: Maximum 300-400 lines per file\r\n- **Function/Method size**: Maximum 50 lines per function\r\n- **Class/Module complexity**: Maximum 10 methods per class\r\n- **Nesting depth**: Maximum 3 levels of indentation\r\n\r\n## Dashboard/Monitoring Structure\r\n\r\n### Streamlit UI Organization\r\n```\r\nsrc/ui/\r\n└── streamlit_app.py     # Main Streamlit application\r\n    ├── Sidebar components\r\n    ├── Main chat interface\r\n    ├── Knowledge base management\r\n    └── Configuration panels\r\n```\r\n\r\n### Separation of Concerns\r\n- **UI isolated** from business logic via API calls\r\n- **State management** handled by Streamlit session state\r\n- **Configuration** loaded from external files\r\n- **Real-time updates** via WebSocket connections\r\n\r\n## Documentation Standards\r\n\r\n- **All public APIs** must have docstrings following Google style\r\n- **Complex logic** includes inline comments explaining the approach\r\n- **Configuration files** include comments for each setting\r\n- **README files** for major modules and the overall project\r\n- **Type hints** used throughout for better code clarity and IDE support\r\n\r\n### Documentation Format\r\n```python\r\ndef process_document(file_path: str, chunk_size: int = 1000) -> List[Document]:\r\n    \"\"\"Process a document and split it into chunks for the knowledge base.\r\n    \r\n    Args:\r\n        file_path: Path to the document file\r\n        chunk_size: Size of each text chunk in characters\r\n        \r\n    Returns:\r\n        List of Document objects with metadata\r\n        \r\n    Raises:\r\n        FileNotFoundError: If the document doesn't exist\r\n        ValueError: If the file format is not supported\r\n    \"\"\"\r\n    # Implementation here\r\n```\r\n\r\n## Testing Structure\r\n\r\n- **Unit tests** in `tests/` directory mirroring source structure\r\n- **Integration tests** for API endpoints and service interactions\r\n- **Test data** separated from test logic\r\n- **Mock external dependencies** for reliable testing\r\n",
  "fileStats": {
    "size": 6481,
    "lines": 173,
    "lastModified": "2025-11-12T06:09:36.257Z"
  },
  "comments": []
}